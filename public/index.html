<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ESP32 Temperature Monitor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    .node {
      background: #fff;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<h1>üå°Ô∏è Gi√°m s√°t nhi·ªát ƒë·ªô ESP32</h1>

<div id="nodes">ƒêang ch·ªù d·ªØ li·ªáu...</div>

<script>
async function loadData() {
  try {
    const res = await fetch('/api/data');
    const data = await res.json();

    const container = document.getElementById('nodes');
    container.innerHTML = '';

    if (!data || Object.keys(data).length === 0) {
      container.innerHTML = 'Ch∆∞a c√≥ d·ªØ li·ªáu';
      return;
    }

    // N·∫øu server ch·ªâ l∆∞u 1 node
    const nodeDiv = document.createElement('div');
    nodeDiv.className = 'node';
    nodeDiv.innerHTML = `
      <b>Node:</b> ${data.node_id ?? 'N/A'}<br>
      <b>Nhi·ªát ƒë·ªô v·∫≠t:</b> ${data.temp_obj ?? '--'} ¬∞C<br>
      <b>Nhi·ªát ƒë·ªô m√¥i tr∆∞·ªùng:</b> ${data.temp_amb ?? '--'} ¬∞C
    `;
    container.appendChild(nodeDiv);

  } catch (err) {
    console.error(err);
  }
}

// Load m·ªói 3 gi√¢y
setInterval(loadData, 3000);
loadData();
</script>

</body>
</html>
